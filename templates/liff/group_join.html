{% extends "base.html" %}

{% block title %}加入群組{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/group_form.css') }}">
{% endblock %}

{% block content %}
<div class="container">
  <div class="card">
    <div class="card-header">
      <button onclick="window.location.href='/liff/full/groups'" class="btn-icon-back">
        <i class="fas fa-arrow-left"></i>
      </button>
      <h1><i class="fas fa-link text-primary"></i> 加入群組</h1>
    </div>
    
    <div class="info-quote">
      <p class="info-quote-detail">輸入群組代碼以加入現有群組</p>
    </div>

    <form id="joinGroupForm">
      <div class="form-group">
        <label for="groupCode">群組代碼 *</label>
        <input
          type="text"
          id="groupCode"
          name="groupCode"
          placeholder="輸入6位數代碼"
          required
          maxlength="6"
          style="text-transform: uppercase; font-family: 'Courier New', monospace; letter-spacing: 2px;"
          value="{{ group_code }}"
        >
        <small class="text-secondary">請輸入朋友分享給您的群組代碼</small>
      </div>

      <div id="groupPreview" class="group-info-box hidden">
        <p><strong>群組名稱：</strong><span id="previewGroupName"></span></p>
        <p><strong>成員人數：</strong><span id="previewMemberCount"></span> 位</p>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-block">
          加入群組
        </button>
        <button type="button" id="cancelBtn" class="btn btn-secondary btn-block">
          取消
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/group_join.js') }}"></script>
<script>
  window.INITIAL_GROUP_CODE = '{{ group_code }}';
  window.onload = function () {
    initGroupJoinPage('{{ liff_id }}');
  };
</script>
{% endblock %}
