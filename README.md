# LINE Bot å¤šäººè¨˜å¸³åˆ†å¸³ç³»çµ±

ä¸€å€‹åŸºæ–¼ Flask å’Œ Firebase çš„ LINE Bot,æä¾›å¤šäººå…±åŒè¨˜å¸³èˆ‡è‡ªå‹•åˆ†å¸³åŠŸèƒ½ã€‚Bot ä»¥ä¸€å°ä¸€èŠå¤©æ¨¡å¼é‹ä½œ,ä½¿ç”¨è€…å¯å»ºç«‹ç¾¤çµ„é€²è¡Œè¨˜å¸³èˆ‡å¾…è¾¦ç®¡ç†ã€‚

## åŠŸèƒ½ç‰¹è‰²

### ç¾¤çµ„ç®¡ç†
- ğŸ‘¥ **å»ºç«‹ç¾¤çµ„**ï¼šé€é LIFF å»ºç«‹åˆ†å¸³ç¾¤çµ„
- ğŸ”— **é‚€è«‹ç¢¼åŠ å…¥**ï¼šä½¿ç”¨ 6 ä½ä»£ç¢¼é‚€è«‹æˆå“¡åŠ å…¥
- ğŸ“± **åˆ†äº«åŠŸèƒ½**ï¼šä¸€éµåˆ†äº«ç¾¤çµ„é‚€è«‹é€£çµ

### è¨˜å¸³åŠŸèƒ½
- ğŸ¯ **LIFF äº’å‹•è¡¨å–®**ï¼šè¦–è¦ºåŒ–è¨˜å¸³ä»‹é¢ï¼Œæ”¯æ´å¹³å‡åˆ†å¸³ã€è‡ªè¨‚é‡‘é¡ã€æŒ‡å®šæˆå“¡
- âœ… **å¤šäººè¨˜å¸³**ï¼šç¾¤çµ„å…§å¤šäººå…±åŒè¨˜å¸³
- âœ… **æ™ºæ…§çµç®—**ï¼šè‡ªå‹•è¨ˆç®—æœ€å„ªåŒ–é‚„æ¬¾æ–¹æ¡ˆï¼ˆæœ€å°‘è½‰å¸³æ¬¡æ•¸ï¼‰
- âœ… **å¸³ç›®æŸ¥è©¢**ï¼šæŸ¥çœ‹ç¾¤çµ„å¸³ç›®ã€ç¯©é¸æœªçµç®—/å·²çµç®—å¸³ç›®

### å¾…è¾¦æ¸…å–®åŠŸèƒ½
- ğŸ“ **LIFF è¡¨å–®ç®¡ç†**ï¼šé€éç¾¤çµ„è©³ç´°é é€²å…¥å¾…è¾¦ç®¡ç†
- âœ… **æ–°å¢/ç·¨è¼¯å¾…è¾¦**ï¼šå¡«å¯«æ¨™é¡Œã€æè¿°ã€è² è²¬äººã€æˆªæ­¢æ—¥æœŸ
- ğŸ‘¥ **è² è²¬äººåˆ†é…**ï¼šå¾ç¾¤çµ„æˆå“¡ä¸­æŒ‡å®šè² è²¬äºº
- ğŸ“ **é¡åˆ¥ç®¡ç†**ï¼šå·¥ä½œã€å­¸ç¿’ã€ç”Ÿæ´»ã€è³¼ç‰©ã€å…¶ä»–
- ğŸ“… **åˆ°æœŸæ—¥è¨­å®š**ï¼šè¨­å®šå¾…è¾¦äº‹é …æˆªæ­¢æ—¥æœŸ
- ğŸ¯ **å„ªå…ˆåº¦ç®¡ç†**ï¼šä½ã€ä¸­ã€é«˜ä¸‰å€‹å„ªå…ˆç­‰ç´š
- âœ… **ç‹€æ…‹è¿½è¹¤**ï¼šå¾…è™•ç†ã€é€²è¡Œä¸­ã€å·²å®Œæˆã€å·²å–æ¶ˆ

### å…±åŒç‰¹è‰²
- âœ… **Flex Message**ï¼šç²¾ç¾çš„å¡ç‰‡å¼è¨Šæ¯é¡¯ç¤º
- âœ… **Firebase é›²ç«¯å„²å­˜**ï¼šè³‡æ–™å®‰å…¨å¯é ï¼Œæ”¯æ´å¤šè£ç½®åŒæ­¥
- âœ… **LINE é¸å–®**ï¼šé€é Rich Menu å¿«é€Ÿå­˜å–åŠŸèƒ½

## æŠ€è¡“æ¶æ§‹

- **å¾Œç«¯æ¡†æ¶**ï¼šFlask
- **LINE Bot SDK**ï¼šline-bot-sdk 3.21.0
- **LIFF**ï¼šLINE Front-end Framework
- **è³‡æ–™åº«**ï¼šFirebase Firestore
- **äº’å‹•å…ƒç´ **ï¼šRich Menuã€Flex Message
- **Python ç‰ˆæœ¬**ï¼š3.8+

## å°ˆæ¡ˆçµæ§‹

```
Coop-Line-Bot/
â”œâ”€â”€ app.py                      # Flask ä¸»ç¨‹å¼
â”œâ”€â”€ config.py                   # è¨­å®šæª”
â”œâ”€â”€ requirements.txt            # å¥—ä»¶ä¾è³´
â”œâ”€â”€ .env                        # ç’°å¢ƒè®Šæ•¸
â”œâ”€â”€ blueprints/                 # Flask Blueprints
â”‚   â”œâ”€â”€ linebot_app.py          # LINE Webhook è™•ç†
â”‚   â”œâ”€â”€ liff_app.py             # LIFF é é¢è·¯ç”±
â”‚   â””â”€â”€ api_app.py              # RESTful API
â”œâ”€â”€ templates/                  # æ¨¡æ¿
â”‚   â”œâ”€â”€ base.html               # åŸºç¤æ¨¡æ¿ï¼ˆå« LIFF SDKï¼‰
â”‚   â””â”€â”€ liff/                   # LIFF é é¢
â”‚       â”œâ”€â”€ groups_list.html    # ç¾¤çµ„åˆ—è¡¨
â”‚       â”œâ”€â”€ group_create.html   # å»ºç«‹ç¾¤çµ„
â”‚       â”œâ”€â”€ group_join.html     # åŠ å…¥ç¾¤çµ„ï¼ˆé‚€è«‹ç¢¼ï¼‰
â”‚       â”œâ”€â”€ group_detail.html   # ç¾¤çµ„è©³ç´°é ï¼ˆå¸³ç›®åˆ—è¡¨ï¼‰
â”‚       â”œâ”€â”€ expense_form.html   # è¨˜å¸³è¡¨å–®
â”‚       â”œâ”€â”€ settlement.html     # çµç®—é é¢
â”‚       â”œâ”€â”€ todo_form.html      # å¾…è¾¦äº‹é …è¡¨å–®
â”‚       â””â”€â”€ liff.html           # LIFF å‹•æ…‹è·¯ç”±é é¢
â”œâ”€â”€ static/                     # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ base.css            # åŸºç¤æ¨£å¼èˆ‡å…±ç”¨çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ groups_list.css     # ç¾¤çµ„åˆ—è¡¨æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ group_form.css      # ç¾¤çµ„è¡¨å–®æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ group_detail.css    # ç¾¤çµ„è©³ç´°é æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ expense_form.css    # è¨˜å¸³è¡¨å–®æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ settlement.css      # çµç®—é é¢æ¨£å¼
â”‚   â”‚   â””â”€â”€ todo_form.css       # å¾…è¾¦è¡¨å–®æ¨£å¼
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ base.js             # åŸºç¤å·¥å…·å‡½æ•¸ï¼ˆLIFFã€APIã€Loadingï¼‰
â”‚       â”œâ”€â”€ groups_list.js      # ç¾¤çµ„åˆ—è¡¨é‚è¼¯
â”‚       â”œâ”€â”€ group_create.js     # å»ºç«‹ç¾¤çµ„é‚è¼¯
â”‚       â”œâ”€â”€ group_join.js       # åŠ å…¥ç¾¤çµ„é‚è¼¯
â”‚       â”œâ”€â”€ group_utils.js      # ç¾¤çµ„å…±ç”¨å·¥å…·
â”‚       â”œâ”€â”€ group_detail.js     # ç¾¤çµ„è©³ç´°é é‚è¼¯
â”‚       â”œâ”€â”€ expense_form.js     # è¨˜å¸³è¡¨å–®é‚è¼¯
â”‚       â”œâ”€â”€ settlement.js       # çµç®—é é¢é‚è¼¯
â”‚       â””â”€â”€ todo_form.js        # å¾…è¾¦è¡¨å–®é‚è¼¯
â”œâ”€â”€ models/                     # è³‡æ–™æ¨¡å‹
â”‚   â”œâ”€â”€ user.py                 # ä½¿ç”¨è€…æ¨¡å‹
â”‚   â”œâ”€â”€ group.py                # ç¾¤çµ„æ¨¡å‹ï¼ˆå«é‚€è«‹ç¢¼ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ expense.py              # æ”¯å‡ºæ¨¡å‹
â”‚   â”œâ”€â”€ settlement.py           # çµç®—æ¨¡å‹
â”‚   â””â”€â”€ todo.py                 # å¾…è¾¦äº‹é …æ¨¡å‹
â”œâ”€â”€ services/                   # æœå‹™å±¤
â”‚   â”œâ”€â”€ firebase_service.py     # Firebase Firestore æ“ä½œï¼ˆSingletonï¼‰
â”‚   â”œâ”€â”€ expense_service.py      # æ”¯å‡ºæ¥­å‹™é‚è¼¯
â”‚   â”œâ”€â”€ settlement_service.py   # çµç®—è¨ˆç®—ï¼ˆæœ€å°‘äº¤æ˜“ç®—æ³•ï¼‰
â”‚   â””â”€â”€ todo_service.py         # å¾…è¾¦äº‹é …æ¥­å‹™é‚è¼¯
â”œâ”€â”€ handlers/                   # è™•ç†å™¨
â”‚   â””â”€â”€ message_handler.py      # LINE è¨Šæ¯è™•ç†ï¼ˆä¸»é¸å–®ï¼‰
â””â”€â”€ utils/                      # å·¥å…·
    â”œâ”€â”€ liff_enum.py            # LIFF å°ºå¯¸æšèˆ‰
    â”œâ”€â”€ formatter.py            # æ ¼å¼åŒ–å·¥å…·
    â””â”€â”€ flex_message.py         # Flex Message è¨Šæ¯å¡ç‰‡
```

## å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒæº–å‚™

ç¢ºä¿å·²å®‰è£ Python 3.8 æˆ–ä»¥ä¸Šç‰ˆæœ¬ï¼š

```bash
python --version
```

### 2. å®‰è£ä¾è³´å¥—ä»¶

```bash
pip install -r requirements.txt
```

### 3. è¨­å®š LINE Bot

1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/)
2. å»ºç«‹ Messaging API Channel
3. å–å¾— Channel Secret å’Œ Channel Access Token
4. å°‡æ†‘è­‰å¡«å…¥ `.env` æª”æ¡ˆ

### 4. è¨­å®š LIFFï¼ˆæ”¯æ´å¤šç¨®å°ºå¯¸ï¼‰

1. åœ¨ LINE Developers Console çš„ Messaging API é »é“ä¸­
2. é»é¸ã€ŒLIFFã€åˆ†é ï¼Œå»ºç«‹ LIFF æ‡‰ç”¨ç¨‹å¼ï¼ˆå¯å»ºç«‹ 3 å€‹ä¸åŒå°ºå¯¸ï¼‰ï¼š

| å°ºå¯¸ | Endpoint URL | ç”¨é€” |
|------|-------------|------|
| Full | `https://your-domain.com/liff/full` | å…¨è¢å¹•æ¨¡å¼ |
| Tall | `https://your-domain.com/liff/tall` | é«˜ç‰ˆé¢æ¨¡å¼ |
| Compact | `https://your-domain.com/liff/compact` | ç²¾ç°¡æ¨¡å¼ |

3. è¨˜å¸³è¡¨å–® Endpointï¼š`https://your-domain.com/liff/full/expense`
4. è¤‡è£½å„å°ºå¯¸çš„ LIFF ID ä¸¦åŠ å…¥ `.env`

### 5. è¨­å®š Firebase

1. å‰å¾€ [Firebase Console](https://console.firebase.google.com/)
2. å»ºç«‹æ–°å°ˆæ¡ˆ
3. å•Ÿç”¨ Firestore Database
4. åœ¨ã€Œå°ˆæ¡ˆè¨­å®šã€â†’ã€Œæœå‹™å¸³æˆ¶ã€ä¸‹è¼‰æœå‹™å¸³æˆ¶é‡‘é‘°ï¼ˆJSON æ ¼å¼ï¼‰
5. å°‡æ•´å€‹ JSON å…§å®¹è¤‡è£½åˆ° `.env` çš„ `FIREBASE_CREDENTIALS`

### 6. è¨­å®šç’°å¢ƒè®Šæ•¸

ç·¨è¼¯ `.env` æª”æ¡ˆï¼š

```env
CHANNEL_SECRET=ä½ çš„Channel_Secret
CHANNEL_ACCESS_TOKEN=ä½ çš„Channel_Access_Token

# LIFF è¨­å®šï¼ˆè‡³å°‘è¨­å®šä¸€å€‹ï¼‰
LIFF_ID_FULL=ä½ çš„LIFF_ID_FULL
LIFF_ID_TALL=ä½ çš„LIFF_ID_TALL
LIFF_ID_COMPACT=ä½ çš„LIFF_ID_COMPACT

# Firebase æ†‘è­‰ï¼ˆJSON å­—ä¸²ï¼‰
FIREBASE_CREDENTIALS={"type":"service_account","project_id":"your-project",...}
```

### 7. åŸ·è¡Œæ‡‰ç”¨ç¨‹å¼

```bash
python app.py
```

æ‡‰ç”¨ç¨‹å¼æœƒåœ¨ `http://localhost:5000` å•Ÿå‹•ã€‚

### 8. è¨­å®š Webhook

é–‹ç™¼ç’°å¢ƒå¯ä½¿ç”¨ [ngrok](https://ngrok.com/) å»ºç«‹å…¬é–‹ URLï¼š

```bash
ngrok http 5000
```

å°‡ ngrok æä¾›çš„ HTTPS URL åŠ ä¸Š `/callback` è¨­å®šåˆ° LINE Developers Console çš„ Webhook URLã€‚

ä¾‹å¦‚ï¼š`https://abc123.ngrok.io/callback`

## ä½¿ç”¨èªªæ˜

### é–‹å§‹ä½¿ç”¨

1. åŠ å…¥ LINE Bot ç‚ºå¥½å‹
2. é€éä¸‹æ–¹é¸å–®é»æ“Šã€Œæˆ‘çš„ç¾¤çµ„ã€é–‹å•Ÿç¾¤çµ„åˆ—è¡¨
3. é¸æ“‡ã€Œå»ºç«‹æ–°ç¾¤çµ„ã€æˆ–ä½¿ç”¨é‚€è«‹ç¢¼ã€ŒåŠ å…¥ç¾¤çµ„ã€

### ç¾¤çµ„ç®¡ç†

**å»ºç«‹ç¾¤çµ„**
1. é»é¸ã€Œå»ºç«‹æ–°ç¾¤çµ„ã€
2. è¼¸å…¥ç¾¤çµ„åç¨±
3. ç³»çµ±è‡ªå‹•ç”Ÿæˆ 6 ä½é‚€è«‹ç¢¼
4. åˆ†äº«é‚€è«‹é€£çµçµ¦æˆå“¡

**åŠ å…¥ç¾¤çµ„**
1. é»é¸ã€ŒåŠ å…¥ç¾¤çµ„ã€
2. è¼¸å…¥ 6 ä½é‚€è«‹ç¢¼
3. æˆåŠŸåŠ å…¥ç¾¤çµ„

### è¨˜å¸³æ“ä½œ

**æ–°å¢æ”¯å‡ºï¼ˆä½¿ç”¨ LIFF è¡¨å–®ï¼‰**
1. é€²å…¥ç¾¤çµ„è©³ç´°é é¢
2. é»æ“Šã€Œæ–°å¢æ”¯å‡ºã€
3. å¡«å¯«ä»¥ä¸‹è³‡è¨Šï¼š
   - é …ç›®åç¨±ï¼ˆä¾‹å¦‚ï¼šåˆé¤ã€è¨ˆç¨‹è»Šï¼‰
   - ç¸½é‡‘é¡ï¼ˆåƒ…æ•´æ•¸ï¼‰
   - é¸æ“‡ä»˜æ¬¾äºº
   - é¸æ“‡åˆ†å¸³æ–¹å¼ï¼š
     - **å¹³å‡åˆ†å¸³**ï¼šè‡ªå‹•å¹³å‡åˆ†é…çµ¦é¸ä¸­çš„æˆå“¡
     - **è‡ªè¨‚é‡‘é¡**ï¼šå¯ç‚ºæ¯å€‹äººè¨­å®šä¸åŒé‡‘é¡
     - **æŒ‡å®šæˆå“¡**ï¼šåªé¸æ“‡ç‰¹å®šæˆå“¡åˆ†å¸³
4. å‹¾é¸è¦åˆ†å¸³çš„æˆå“¡
5. è‹¥é¸æ“‡è‡ªè¨‚é‡‘é¡ï¼Œå¯è¼¸å…¥æ¯äººæ‡‰ä»˜é‡‘é¡
6. ç³»çµ±æœƒè‡ªå‹•é©—è­‰ç¸½é‡‘é¡æ˜¯å¦ç›¸ç¬¦
7. é€å‡ºå¾Œè‡ªå‹•ç™¼é€ Flex Message åˆ° LINE èŠå¤©å®¤

**æŸ¥è©¢å¸³ç›®**
- ç¾¤çµ„è©³ç´°é é¢æä¾›ä¸‰å€‹ç¯©é¸æ¨™ç±¤ï¼šå…¨éƒ¨ã€æœªçµç®—ã€å·²çµç®—
- é»æ“Šæ”¯å‡ºé …ç›®å¯æŸ¥çœ‹è©³ç´°è³‡è¨Šæˆ–åˆªé™¤

**çµç®—**
1. é€²å…¥ç¾¤çµ„è©³ç´°é é¢
2. é»æ“Šã€Œçµç®—ã€æŒ‰éˆ•
3. ç³»çµ±è‡ªå‹•è¨ˆç®—æœ€å„ªåŒ–é‚„æ¬¾æ–¹æ¡ˆ
4. ç¢ºèªå¾Œå°‡æ‰€æœ‰å¸³ç›®æ¨™è¨˜ç‚ºå·²çµç®—

### å¾…è¾¦ç®¡ç†

**æ–°å¢å¾…è¾¦**
1. é€²å…¥ç¾¤çµ„è©³ç´°é é¢
2. é»æ“Šå³ä¸Šè§’ã€Œå¾…è¾¦ã€æŒ‰éˆ•
3. åœ¨å¾…è¾¦è¡¨å–®ä¸­å¡«å¯«ï¼š
   - æ¨™é¡Œï¼ˆå¿…å¡«ï¼‰
   - æè¿°ï¼ˆé¸å¡«ï¼‰
   - è² è²¬äººï¼ˆå¾ç¾¤çµ„æˆå“¡ä¸­é¸æ“‡ï¼‰
   - é¡åˆ¥ï¼ˆå·¥ä½œã€å­¸ç¿’ã€ç”Ÿæ´»ã€è³¼ç‰©ã€å…¶ä»–ï¼‰
   - å„ªå…ˆåº¦ï¼ˆä½ã€ä¸­ã€é«˜ï¼‰
   - æˆªæ­¢æ—¥æœŸï¼ˆé¸å¡«ï¼‰
4. é»æ“Šã€Œæ–°å¢å¾…è¾¦ã€é€å‡º

**ç·¨è¼¯/åˆªé™¤å¾…è¾¦**
- åœ¨å¾…è¾¦è¡¨å–®é é¢å¯æŸ¥çœ‹æ‰€æœ‰å¾…è¾¦äº‹é …
- é»æ“Šå¾…è¾¦é …ç›®é€²å…¥ç·¨è¼¯æ¨¡å¼
- å¯æ›´æ–°ç‹€æ…‹ï¼šå¾…è™•ç† â†’ é€²è¡Œä¸­ â†’ å·²å®Œæˆ
- ä¹Ÿå¯é¸æ“‡åˆªé™¤å¾…è¾¦äº‹é …

### æ–‡å­—æŒ‡ä»¤

- `èªªæ˜` æˆ– `ä¸»é¸å–®` - é¡¯ç¤ºæ­¡è¿è¨Šæ¯
- å…¶ä»–åŠŸèƒ½è«‹é€é LINE é¸å–®é–‹å•Ÿ LIFF é é¢æ“ä½œ

## Firebase Firestore è³‡æ–™çµæ§‹

### usersï¼ˆä½¿ç”¨è€…é›†åˆï¼‰
```javascript
{
  line_user_id: string,
  display_name: string,
  created_at: timestamp,
  updated_at: timestamp
}
```

### groupsï¼ˆç¾¤çµ„é›†åˆï¼‰
```javascript
{
  group_name: string,
  group_code: string,        // 6 ä½é‚€è«‹ç¢¼
  created_by: string,         // å»ºç«‹è€… user_id
  created_at: timestamp,
  is_active: boolean,
  members: [user_id, ...]     // æˆå“¡ ID é™£åˆ—
}
```

### chatsï¼ˆä¸€å°ä¸€èŠå¤©è¨˜éŒ„ï¼‰
```javascript
{
  line_user_id: string,
  user_name: string,
  created_at: timestamp,
  updated_at: timestamp,
  is_active: boolean
}
```

### expensesï¼ˆæ”¯å‡ºè¨˜éŒ„é›†åˆï¼‰
```javascript
{
  group_id: string,
  payer_id: string,
  payer_name: string,
  amount: number,
  description: string,
  split_type: string,
  splits: [{
    user_id: string,
    user_name: string,
    amount: number,
    is_paid: boolean
  }],
  created_by: string,
  created_at: timestamp,
  is_settled: boolean,
  expense_number: number
}
```

### settlementsï¼ˆçµç®—è¨˜éŒ„é›†åˆï¼‰
```javascript
{
  group_id: string,
  settlement_data: [{
    from_user_id: string,
    from_user_name: string,
    to_user_id: string,
    to_user_name: string,
    amount: number
  }],
  balance_summary: {
    [user_id]: {
      user_name: string,
      net_amount: number
    }
  },
  settled_at: timestamp,
  settled_by: string,
  settled_by_name: string
}
```

### todosï¼ˆå¾…è¾¦äº‹é …é›†åˆï¼‰
```javascript
{
  group_id: string,
  title: string,
  description: string,
  category: string,          // å·¥ä½œã€å­¸ç¿’ã€ç”Ÿæ´»ã€è³¼ç‰©ã€å…¶ä»–
  assignee_id: string,
  assignee_name: string,
  status: string,            // pendingã€in_progressã€completedã€cancelled
  priority: string,          // lowã€mediumã€high
  due_date: timestamp,       // æˆªæ­¢æ—¥æœŸï¼ˆé¸å¡«ï¼‰
  created_at: timestamp,
  updated_at: timestamp,
  completed_at: timestamp    // å®Œæˆæ™‚é–“ï¼ˆé¸å¡«ï¼‰
}
```

## éƒ¨ç½²

### ä½¿ç”¨ Heroku

1. å»ºç«‹ `Procfile`ï¼š
```
web: gunicorn app:app
```

2. éƒ¨ç½²åˆ° Herokuï¼š
```bash
heroku create your-app-name
git push heroku main
```

3. è¨­å®šç’°å¢ƒè®Šæ•¸ï¼š
```bash
heroku config:set CHANNEL_SECRET=ä½ çš„å€¼
heroku config:set CHANNEL_ACCESS_TOKEN=ä½ çš„å€¼
```

4. ä¸Šå‚³ Firebase æ†‘è­‰ï¼ˆå»ºè­°ä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼‰

### ä½¿ç”¨ Google Cloud Run

é©åˆæ­é… Firebase ä½¿ç”¨ï¼Œè©³è¦‹ [Google Cloud Run æ–‡ä»¶](https://cloud.google.com/run/docs)ã€‚

## é–‹ç™¼æ³¨æ„äº‹é …

1. **ç’°å¢ƒè®Šæ•¸ä¿è­·**
   - `.env` å’Œ `firebase_config.json` ä¸æ‡‰æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
   - å·²åœ¨ `.gitignore` ä¸­æ’é™¤

2. **Firebase å…è²»æ–¹æ¡ˆé™åˆ¶**
   - æ¯æ—¥è®€å–ï¼š50,000 æ¬¡
   - æ¯æ—¥å¯«å…¥ï¼š20,000 æ¬¡
   - å„²å­˜ç©ºé–“ï¼š1 GB

3. **å®‰å…¨æ€§**
   - Webhook æœƒé©—è­‰ LINE Platform çš„ç°½ç« 
   - Firestore è¨­å®šç‚ºåªå…è¨±æœå‹™å¸³æˆ¶å­˜å–

## æ•…éšœæ’é™¤

### Firebase åˆå§‹åŒ–å¤±æ•—
- ç¢ºèª `firebase_config.json` è·¯å¾‘æ­£ç¢º
- ç¢ºèª Firebase å°ˆæ¡ˆå·²å•Ÿç”¨ Firestore

### LINE Bot ç„¡å›æ‡‰
- ç¢ºèª Webhook URL è¨­å®šæ­£ç¢ºï¼ˆå¿…é ˆæ˜¯ HTTPSï¼‰
- æª¢æŸ¥ Channel Secret å’Œ Channel Access Token
- æŸ¥çœ‹æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ

### LIFF é é¢ç„¡æ³•é–‹å•Ÿ
- ç¢ºèª LIFF_ID è¨­å®šæ­£ç¢º
- ç¢ºèª Endpoint URL å·²æ­£ç¢ºè¨­å®š
- æª¢æŸ¥æ˜¯å¦å·²å•Ÿç”¨ HTTPS

### ç¾¤çµ„åŠŸèƒ½å•é¡Œ
- ç¢ºèªä½¿ç”¨è€…å·²åŠ å…¥ LINE Bot å¥½å‹
- ç¢ºèªå·²é€é LIFF é é¢å»ºç«‹æˆ–åŠ å…¥ç¾¤çµ„

## æˆæ¬Š

MIT License

## è¯çµ¡æ–¹å¼

å¦‚æœ‰å•é¡Œæˆ–å»ºè­°ï¼Œæ­¡è¿é–‹ Issue è¨è«–ã€‚

---
